# NoTab - Chrome浏览器链接预览插件

完全复刻 notab.pro 功能的Chrome浏览器插件，提供强大的链接预览、阅读模式、视频模式、翻译和搜索功能。

## ✨ 核心功能

- 🔗 **链接预览** - 在当前页面直接预览链接内容，无需打开新标签
- 📖 **阅读模式** - 提取文章主要内容，提供沉浸式阅读体验
- 🎬 **视频模式** - 自动检测并优化视频播放体验
- 🌐 **快速翻译** - 选中文本一键翻译，支持多语言
- 🔍 **快速搜索** - 快速搜索选中文本，支持多个搜索引擎
- 🎨 **多主题支持** - 亮色/暗色主题，支持自动切换
- 📌 **多窗口管理** - 同时预览多个链接，支持固定窗口
- ☁️ **云同步** - Google账号自动同步设置

## 🚀 快速开始

### 安装方法

1. 克隆或下载此项目
2. 打开Chrome浏览器，进入 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择 `notab-extension` 文件夹
6. 完成！插件已安装

### 使用方法

#### 链接预览
- **拖拽链接**：将任意链接拖到页面空白处，释放即可预览
- **Ctrl + 点击**：按住Ctrl键点击链接即可预览
- **右键菜单**：右键点击链接，选择"在预览窗口中打开"

#### 阅读模式
1. 打开链接预览窗口
2. 点击顶部的 📖 按钮
3. 自动提取并显示文章主要内容

#### 视频模式
1. 打开视频网站的预览窗口
2. 点击顶部的 🎬 按钮
3. 享受沉浸式视频观看体验

#### 翻译功能
1. 在任意网页选中文本
2. 点击浮动的 🌐 按钮
3. 查看翻译结果

#### 搜索功能
1. 在任意网页选中文本
2. 点击浮动的 🔍 按钮
3. 在预览窗口中查看搜索结果

## ⌨️ 键盘快捷键

- `Esc` - 关闭所有未固定的预览窗口
- `Ctrl + Shift + C` - 级联布局所有预览窗口
- `Ctrl + Shift + T` - 平铺布局所有预览窗口
- `Ctrl + Shift + X` - 关闭所有预览窗口（包括固定的）

## 📱 预览窗口操作

- **拖拽移动**：点击头部拖拽窗口
- **调整大小**：拖拽窗口边缘的8个手柄
- **固定窗口**：点击 📌 按钮固定，防止被关闭
- **新标签打开**：点击 🔗 按钮在新标签中打开
- **关闭窗口**：点击 ✕ 按钮关闭

## ⚙️ 设置

点击插件图标或右键选择"选项"进入设置页面，可以自定义：

### 常规设置
- 主题选择（亮色/暗色/自动）
- 查看所有快捷键

### 预览设置
- 触发方式（拖拽/Ctrl+点击/悬停）
- 悬停延迟时间
- 默认窗口大小
- 多窗口预览开关

### 阅读模式设置
- 字体大小、行高、最大宽度
- 字体族选择

### 翻译设置
- 翻译引擎选择
- 快速翻译按钮开关
- 默认目标语言

## 🛠️ 技术栈

- **Manifest Version**: V3
- **前端技术**: Vanilla JavaScript + HTML5 + CSS3
- **存储**: Chrome Storage API (支持云同步)
- **翻译API**: LibreTranslate (免费) / MyMemory (免费)

## 📁 项目结构

```
notab-extension/
├── manifest.json              # 扩展配置文件
├── background/
│   └── service-worker.js     # 后台服务
├── content/
│   ├── content-script.js     # 主入口
│   ├── link-preview.js       # 链接预览
│   ├── reader-mode.js        # 阅读模式
│   ├── video-mode.js         # 视频模式
│   ├── translator.js         # 翻译功能
│   ├── search.js             # 搜索功能
│   ├── ui-manager.js         # UI管理
│   ├── preview-manager.js    # 窗口管理
│   └── content-styles.css    # 样式
├── popup/
│   ├── popup.html            # 弹出窗口
│   ├── popup.js
│   └── popup.css
├── options/
│   ├── options.html          # 设置页面
│   ├── options.js
│   └── options.css
└── utils/
    ├── constants.js          # 常量定义
    ├── event-bus.js          # 事件总线
    ├── dom-utils.js          # DOM工具
    └── storage.js            # 存储管理
```

## 🔧 开发说明

### 核心模块

1. **LinkPreview** - 链接预览核心，处理iframe加载和CORS问题
2. **UIManager** - 管理窗口拖拽和调整大小
3. **PreviewManager** - 管理多个预览窗口的生命周期
4. **ReaderMode** - 使用简化的Readability算法提取文章内容
5. **VideoMode** - 检测和优化视频播放
6. **Translator** - 集成免费翻译API
7. **Search** - 多搜索引擎支持

### CORS处理

对于禁止iframe嵌入的网站，插件使用background script通过fetch获取内容，然后在shadow DOM中渲染。

### 性能优化

- 延迟加载iframe内容
- 限制最大预览窗口数量
- 翻译结果缓存
- 防抖和节流处理

## 🐛 已知问题

1. 某些设置了严格CSP的网站无法预览
2. 跨域iframe无法执行阅读模式（会使用fallback方案）
3. 视频检测在跨域iframe中受限

## 📝 待办事项

- [ ] 添加更多翻译API支持
- [ ] 支持自定义CSS样式
- [ ] 添加书签功能
- [ ] 历史记录管理
- [ ] 导出为PDF功能

## 📄 许可证

MIT License

## 🙏 致谢

- 灵感来源：[notab.pro](https://notab.pro)
- 阅读模式算法参考：Mozilla Readability

## 📮 反馈

如有问题或建议，请提交Issue。

---

**注意**：图标文件需要手动创建。请在 `icons/` 目录下放置以下尺寸的PNG图标：
- icon16.png (16x16)
- icon48.png (48x48)
- icon128.png (128x128)

建议使用紫色渐变背景（#667eea -> #764ba2）+ 白色 "N" 字母。
